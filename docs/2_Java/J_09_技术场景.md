---
sidebar_position: 9
---

# 技术场景

## 一、黑马

### 1. 单点登录是怎么实现的？

**单点登录（SSO）** 是一种认证机制，指的是用户只需要登录一次，就可以访问多个相互关联但独立的系统或应用，而不需要每次访问新系统时都重新登录。

通俗讲：**登录一次，处处通行**。

应用场景例子：

- 登录一次企业官网后台系统，就可以无感跳转到CRM、OA、财务系统等。

JWT实现：

1. 用户访问其他系统，会在网关判断token是否有效
2. 如果token无效会返回401，前端跳转到登录页面
3. 用户发送登录请求，返回浏览器一个token，浏览器把token保存到cookie
4. 再去访问其他服务的时候，都需要携带token，由网关统一验证后路由到目标服务

### 2. 权限认证是如何实现的？

- 后端管理系统的开发经验
- 介绍RBAC权限模型5张表的关系：基于角色的访问控制
  - 3个基础部分组成：用户、角色、权限
  - 5张表：用户表、角色表、权限表、用户角色中间表、角色权限中间表
- 权限框架：SpringSecurity

### 3. 上传数据的安全性如何控制？

使用非对称加密，给前端一个公钥让他把数据加密后传到后台，后台负责解密后处理数据。

- 文件很大建议使用对称加密，不过不能保存敏感信息
- 文件较小，要求安全性高，建议采用非对称加密

### 4. 你负责项目的时候遇到了哪些比较棘手的问题，如何解决的？

- 设计模式
- 线上BUG
- 调优
- 组件封装：AOP日志

### 5. 你们项目中日志是怎么采集的？

我们搭建了ELK日志采集系统。

- ElasticSearch是全文搜索分析引擎，可以对数据存储、搜索、分析
- Logstash是一个数据收集引擎，可以动态收集数据，可以对数据进行过滤、分析，将数据存储到指定的位置
- Kibana是一个数据分析和可视化平台，配合ElasticSearch对数据进行搜索，分析，图表化展示

### 6. 查看日志的命令

目前采集日志的方式：按天保存到一个日志文件

Linux中查看日志：

- 实时监控日志的变化
  - tail -f xx.log
- 按照行号查询
  - 尾部：tail -n 100 xx.log
  - 头部：head -n 100 xx.log
- 按照关键字找日志的信息
  - 查询日志文件中包含debug标志的行号：cat -n xx.log | grep “debug”
- 按照日期查询
  - sed -n ‘/2023-01-01 12:12:12.090/，/2023-01-01 12:12:12.091/p’ xx.log
- 日志太多的处理方式
  - 分页
  - 过滤

### 7. 生产问题怎么排查

- 分析日志
- 远程DEBUG

### 8. 怎么快速定位系统瓶颈

- 压测（性能测试），项目上线之前测评系统的压力
- 监控工具、链路追踪工具，项目上线之后监控
- 线上诊断工具，项目上线之后监控、排查

## 二、登录









